<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# can

```go
import "github.com/brutella/can"
```

Package can provides an implemention of a CAN bus to send and receive CAN frames\.

## Index

- [Constants](<#constants>)
- [func Marshal(frm Frame) (b []byte, err error)](<#func-marshal>)
- [func NewSockaddr(proto uint16, Ifindex int) syscall.Sockaddr](<#func-newsockaddr>)
- [func Unmarshal(b []byte, frm *Frame) (err error)](<#func-unmarshal>)
- [func Wait(bus *Bus, id uint32, timeout time.Duration) <-chan WaitResponse](<#func-wait>)
- [type Bus](<#type-bus>)
  - [func NewBus(rwc ReadWriteCloser) *Bus](<#func-newbus>)
  - [func NewBusForInterfaceWithName(ifaceName string) (*Bus, error)](<#func-newbusforinterfacewithname>)
  - [func (b *Bus) ConnectAndPublish() error](<#func-bus-connectandpublish>)
  - [func (b *Bus) Disconnect() error](<#func-bus-disconnect>)
  - [func (b *Bus) Publish(frame Frame) error](<#func-bus-publish>)
  - [func (b *Bus) Subscribe(handler Handler)](<#func-bus-subscribe>)
  - [func (b *Bus) SubscribeFunc(fn HandlerFunc)](<#func-bus-subscribefunc>)
  - [func (b *Bus) Unsubscribe(handler Handler)](<#func-bus-unsubscribe>)
- [type Frame](<#type-frame>)
- [type Handler](<#type-handler>)
  - [func NewHandler(fn HandlerFunc) Handler](<#func-newhandler>)
- [type HandlerFunc](<#type-handlerfunc>)
- [type ReadWriteCloser](<#type-readwritecloser>)
  - [func NewEchoReadWriteCloser() ReadWriteCloser](<#func-newechoreadwritecloser>)
  - [func NewReadWriteCloser(rwc io.ReadWriteCloser) ReadWriteCloser](<#func-newreadwritecloser>)
  - [func NewReadWriteCloserForInterface(i *net.Interface) (ReadWriteCloser, error)](<#func-newreadwritecloserforinterface>)
- [type Reader](<#type-reader>)
- [type WaitResponse](<#type-waitresponse>)
- [type Writer](<#type-writer>)


## Constants

```go
const (
    // MaskIDSff is used to extract the valid 11-bit CAN identifier bits from the frame ID of a standard frame format.
    MaskIDSff = 0x000007FF
    // MaskIDEff is used to extract the valid 29-bit CAN identifier bits from the frame ID of an extended frame format.
    MaskIDEff = 0x1FFFFFFF
    // MaskErr is used to extract the the error flag (0 = data frame, 1 = error message) from the frame ID.
    MaskErr = 0x20000000
    // MaskRtr is used to extract the rtr flag (1 = rtr frame) from the frame ID
    MaskRtr = 0x40000000
    // MaskEff is used to extract the eff flag (0 = standard frame, 1 = extended frame) from the frame ID
    MaskEff = 0x80000000
)
```

```go
const (
    // MaxFrameDataLength defines the max length of a CAN data frame defined in ISO 11898-1.
    MaxFrameDataLength = 8
    // MaxExtFrameDataLength defines the max length of an CAN extended data frame defined in ISO ISO 11898-7.
    MaxExtFrameDataLength = 64
)
```

```go
const AF_CAN = syscall.AF_CAN
```

## func [Marshal](<https://github.com/rednexela1941/can/blob/master/frame.go#L23>)

```go
func Marshal(frm Frame) (b []byte, err error)
```

Marshal returns the byte encoding of frm\.

## func [NewSockaddr](<https://github.com/rednexela1941/can/blob/master/socket_linux.go#L7>)

```go
func NewSockaddr(proto uint16, Ifindex int) syscall.Sockaddr
```

## func [Unmarshal](<https://github.com/rednexela1941/can/blob/master/frame.go#L39>)

```go
func Unmarshal(b []byte, frm *Frame) (err error)
```

Unmarshal parses the bytes b and stores the result in the value pointed to by frm\.

## func [Wait](<https://github.com/rednexela1941/can/blob/master/wait.go#L23>)

```go
func Wait(bus *Bus, id uint32, timeout time.Duration) <-chan WaitResponse
```

Wait returns a channel\, which receives a frame or an error\, if the frame with the expected id didn't arrive on time\.

## type [Bus](<https://github.com/rednexela1941/can/blob/master/bus.go#L11-L15>)

Bus represents the CAN bus\. Handlers can subscribe to receive frames\. Frame are sent using the \*Publish\* method\.

```go
type Bus struct {
    // contains filtered or unexported fields
}
```

### func [NewBus](<https://github.com/rednexela1941/can/blob/master/bus.go#L33>)

```go
func NewBus(rwc ReadWriteCloser) *Bus
```

NewBus returns a new CAN bus\.

### func [NewBusForInterfaceWithName](<https://github.com/rednexela1941/can/blob/master/bus.go#L18>)

```go
func NewBusForInterfaceWithName(ifaceName string) (*Bus, error)
```

NewBusForInterfaceWithName returns a bus from the network interface with name ifaceName\.

### func \(\*Bus\) [ConnectAndPublish](<https://github.com/rednexela1941/can/blob/master/bus.go#L41>)

```go
func (b *Bus) ConnectAndPublish() error
```

ConnectAndPublish starts handling CAN frames to publish them to handlers\.

### func \(\*Bus\) [Disconnect](<https://github.com/rednexela1941/can/blob/master/bus.go#L53>)

```go
func (b *Bus) Disconnect() error
```

Disconnect stops handling CAN frames\.

### func \(\*Bus\) [Publish](<https://github.com/rednexela1941/can/blob/master/bus.go#L81>)

```go
func (b *Bus) Publish(frame Frame) error
```

Publish publishes a frame on the bus\.

Frames publishes with the Publish methods are not received by handlers\.

### func \(\*Bus\) [Subscribe](<https://github.com/rednexela1941/can/blob/master/bus.go#L58>)

```go
func (b *Bus) Subscribe(handler Handler)
```

Subscribe adds a handler to the bus\.

### func \(\*Bus\) [SubscribeFunc](<https://github.com/rednexela1941/can/blob/master/bus.go#L63>)

```go
func (b *Bus) SubscribeFunc(fn HandlerFunc)
```

SubscribeFunc adds a function as handler\.

### func \(\*Bus\) [Unsubscribe](<https://github.com/rednexela1941/can/blob/master/bus.go#L69>)

```go
func (b *Bus) Unsubscribe(handler Handler)
```

Unsubscribe removes a handler\.

## type [Frame](<https://github.com/rednexela1941/can/blob/master/frame.go#L9-L20>)

Frame represents a standard CAN data frame

```go
type Frame struct {
    // bit 0-28: CAN identifier (11/29 bit)
    // bit 29: error message flag (ERR)
    // bit 30: remote transmision request (RTR)
    // bit 31: extended frame format (EFF)
    ID     uint32
    Length uint8
    Flags  uint8
    Res0   uint8
    Res1   uint8
    Data   [MaxFrameDataLength]uint8
}
```

## type [Handler](<https://github.com/rednexela1941/can/blob/master/handler.go#L4-L6>)

The Handler interfaces defines a method to receive a frame\.

```go
type Handler interface {
    Handle(frame Frame)
}
```

### func [NewHandler](<https://github.com/rednexela1941/can/blob/master/handler.go#L16>)

```go
func NewHandler(fn HandlerFunc) Handler
```

NewHandler returns a new handler which calls fn when a frame is received\.

## type [HandlerFunc](<https://github.com/rednexela1941/can/blob/master/handler.go#L9>)

HandlerFunc defines the function type to handle a frame\.

```go
type HandlerFunc func(frame Frame)
```

## type [ReadWriteCloser](<https://github.com/rednexela1941/can/blob/master/readwritecloser.go#L23-L28>)

The ReadWriteCloser interface combines the Reader and Writer and \`io\.Closer\` interface\.

```go
type ReadWriteCloser interface {
    Reader
    Writer

    io.Closer
}
```

### func [NewEchoReadWriteCloser](<https://github.com/rednexela1941/can/blob/master/test_readwritecloser.go#L15>)

```go
func NewEchoReadWriteCloser() ReadWriteCloser
```

NewEchoReadWriteCloser returns a ReadWriteCloser which echoes received bytes\.

### func [NewReadWriteCloser](<https://github.com/rednexela1941/can/blob/master/readwritecloser.go#L35>)

```go
func NewReadWriteCloser(rwc io.ReadWriteCloser) ReadWriteCloser
```

NewReadWriteCloser returns a ReadWriteCloser for an \`io\.ReadWriteCloser\`\.

### func [NewReadWriteCloserForInterface](<https://github.com/rednexela1941/can/blob/master/readwritecloser_linux.go#L11>)

```go
func NewReadWriteCloserForInterface(i *net.Interface) (ReadWriteCloser, error)
```

## type [Reader](<https://github.com/rednexela1941/can/blob/master/readwritecloser.go#L9-L12>)

The Reader interface extends the \`io\.Reader\` interface by method to read a frame\.

```go
type Reader interface {
    io.Reader
    ReadFrame(*Frame) error
}
```

## type [WaitResponse](<https://github.com/rednexela1941/can/blob/master/wait.go#L9-L12>)

A WaitResponse encapsulates the response of waiting for a frame\.

```go
type WaitResponse struct {
    Frame Frame
    Err   error
}
```

## type [Writer](<https://github.com/rednexela1941/can/blob/master/readwritecloser.go#L16-L19>)

The Writer interface extends the \`io\.Writer\` interface by method to write a frame\.

```go
type Writer interface {
    io.Writer
    WriteFrame(Frame) error
}
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
